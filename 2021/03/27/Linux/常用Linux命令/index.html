<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Linux相关命令 | Phshi's blog</title><meta name="keywords" content="Linux,CentOS 7"><meta name="author" content="Phshi"><meta name="copyright" content="Phshi"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Linux命令">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux相关命令">
<meta property="og:url" content="https://github.com/phshis/phshi.github.io.git/2021/03/27/Linux/%E5%B8%B8%E7%94%A8Linux%E5%91%BD%E4%BB%A4/">
<meta property="og:site_name" content="Phshi&#39;s blog">
<meta property="og:description" content="Linux命令">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://gitee.com/phshi/phshi_picture/raw/master/img/linux-canva.jpg">
<meta property="article:published_time" content="2021-03-27T03:46:28.000Z">
<meta property="article:modified_time" content="2021-03-27T03:46:28.000Z">
<meta property="article:author" content="Phshi">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://gitee.com/phshi/phshi_picture/raw/master/img/linux-canva.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://github.com/phshis/phshi.github.io.git/2021/03/27/Linux/%E5%B8%B8%E7%94%A8Linux%E5%91%BD%E4%BB%A4/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="NdIUXAOVyGnnBhcrip0ksCawbdAzT0hlBZDE9u4jx6k"/><meta name="baidu-site-verification" content="code-pE5rnuxcfD"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":400},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":150,"languages":{"author":"作者: Phshi","link":"链接: ","source":"来源: Phshi's blog","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-03-27 11:46:28'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    })(window)</script><style type="text/css">.card-announcement .social-button{margin: .6rem 0 0 0; text-align: center;}.card-announcement .social-button a{display: block; margin: 0.2rem 0;background-color: var(--btn-bg); color: var(--btn-color); line-height: 1.6rem; transition: all .3s; position: relative; z-index: 1;}</style><link rel="alternate" href="/atom.xml" title="Phshi's blog" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" data-lazy-src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">51</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">16</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-compass"></i><span> 目录</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/talking/"><i class="fa-fw fas fa-cubes"></i><span> 微博</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fas fa-comment-dots"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-thumbs-up"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://gitee.com/phshi/phshi_picture/raw/master/img/linux.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Phshi's blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-compass"></i><span> 目录</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/talking/"><i class="fa-fw fas fa-cubes"></i><span> 微博</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fas fa-comment-dots"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-thumbs-up"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Linux相关命令<a class="post-edit-link" href="https://github.com/jerryc127/butterfly.js.org/edit/main/source/_posts/Linux/常用Linux命令.md" title="编辑" target="_blank"><i class="fas fa-pencil-alt"></i></a></h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-03-27T03:46:28.000Z" title="发表于 2021-03-27 11:46:28">2021-03-27</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-03-27T03:46:28.000Z" title="更新于 2021-03-27 11:46:28">2021-03-27</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/">Linux</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/CentOS-7/">CentOS 7</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">7.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>31分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Linux相关命令"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>对于任何一个程序员来说，linux都是非常重要的。</p>
<h4 id="1、文件管理"><a href="#1、文件管理" class="headerlink" title="1、文件管理"></a>1、文件管理</h4><ol>
<li><code>ls</code>    </li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ls -l     #该目录下面的文件</span><br><span class="line">ls -l /   #/目录下面的文件</span><br><span class="line">ll        #ls -l 的简写</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><code>cd</code></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /usr   #切换目录至usr</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><code>cp</code></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp 1.text /usr/2.txt   #拷贝文件</span><br></pre></td></tr></table></figure>

<ol start="4">
<li><code>mv</code></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv 1.txt /usr/2.txt   #将1.txt移动到/usr下面并改名为2.txt</span><br></pre></td></tr></table></figure>

<ol start="5">
<li><code>rm</code></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf 1.txt      # -r说明是目录或者文件  f说明不提示确定信息</span><br></pre></td></tr></table></figure>

<ol start="6">
<li><code>pwd</code></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pwd     # 显示当前所在目录</span><br></pre></td></tr></table></figure>

<ol start="7">
<li><code>clean</code></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clean      #清除屏幕信息</span><br></pre></td></tr></table></figure>

<ol start="8">
<li><code>mkdir</code></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir d     #创建d目录</span><br></pre></td></tr></table></figure>

<ol start="9">
<li><code>touch</code></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch 1.txt     #创建1.txt文件</span><br></pre></td></tr></table></figure>



<h4 id="2、系统"><a href="#2、系统" class="headerlink" title="2、系统"></a>2、系统</h4><ol>
<li><code>passwd</code></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd root   #用于设置用户密码</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><code>su</code></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su -      #q切换至超级用户</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><code>man</code></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">man ls      #显示帮助命令</span><br></pre></td></tr></table></figure>

<ol start="4">
<li><code>who</code></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">who -r       #显示当前的运行级别</span><br><span class="line">who -buT     #显示当前登录的系统用户</span><br></pre></td></tr></table></figure>

<h4 id="3、文件查看"><a href="#3、文件查看" class="headerlink" title="3、文件查看"></a>3、文件查看</h4><p>1.<code>vim和vi</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim 1.txt    #查看编辑1.txt文件</span><br><span class="line">vi 1.txt</span><br></pre></td></tr></table></figure>

<p>进入后常用操作：i进行插入    esc退出插入     :wq保存并退出   :!q强制退出</p>
<ul>
<li>跳到最后一行     :$</li>
<li>查找    /zhansan     n    向下查找。    N   向上查找    </li>
</ul>
<ol start="2">
<li><code>cat</code></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat -Ab /var/log/boot.log     #用于查看文件，例如查看Linux启动日志文件文件，并标明行号,只能显示最后一屏内容</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><code>more</code></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">more -c -10 /var/log/boot.log    #用于分页查看文件，例如每页10行查看boot.log文件,可以显示百分比，回车可以向下一行，	空格可以向下一页，q可以退出查看</span><br></pre></td></tr></table></figure>

<ol start="4">
<li><code>less</code></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">less /var/log/boot.log    #可以使用键盘上的PgUp和PgDn向上	和向下翻页，q结束查看</span><br></pre></td></tr></table></figure>

<ol start="5">
<li><code>tail</code></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tail -f ../log/catalina.log     #实时查看文件加载内容，例如查看tomcat启动日志，实时监测是否成功</span><br><span class="line">tail -10 /etc/sudo.conf         #查看文件的后10行，Ctrl+C结束</span><br></pre></td></tr></table></figure>

<h4 id="4、解压与压缩"><a href="#4、解压与压缩" class="headerlink" title="4、解压与压缩"></a>4、解压与压缩</h4><h5 id="4-1、tar类型"><a href="#4-1、tar类型" class="headerlink" title="4.1、tar类型"></a>4.1、tar类型</h5><ol>
<li>分页查看压缩包中内容</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -ztvf /demo.tar.gz |more -c -10</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>用``gzip<code>压缩文件夹</code>/etc<code>中的文件到文件</code>etc.tar.gz`</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zcvf /demo.tar.gz /home</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>用<code>bzip2</code>压缩文件夹<code>/etc</code>到文件<code>/etc.tar.bz2</code></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -jcvf /demo.tar.bz2 /home</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>解压文件到当前目录（gzip）</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf /demo.tar.gz</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>解压文件到指定目录（gzip）</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf /demo.tar.gz -C /usr/local</span><br></pre></td></tr></table></figure>

<h5 id="4-2、zip类型"><a href="#4-2、zip类型" class="headerlink" title="4.2、zip类型"></a>4.2、zip类型</h5><p>1、查看zip文件中的内容</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zipinfo -1 -M  filename.zip</span><br></pre></td></tr></table></figure>

<p>参数说明：</p>
<ul>
<li>-1 只列出文件名称。</li>
<li>-2 此参数的效果和指定&quot;-1&quot;参数类似，但可搭配&quot;-h&quot;,&quot;-t&quot;和&quot;-z&quot;参数使用。</li>
<li>-h 只列出压缩文件的文件名称。</li>
<li>-l 此参数的效果和指定&quot;-m&quot;参数类似，但会列出原始文件的大小而非每个文件的压缩率。</li>
<li>-m 此参数的效果和指定&quot;-s&quot;参数类似，但多会列出每个文件的压缩率。</li>
<li>-M 若信息内容超过一个画</li>
</ul>
<ol start="2">
<li>解压zip文件</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip filename.zip</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>对文件进行zip压缩</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zip filename.zip filename.jar   #将filename.jar压缩为文件名为filename.zip的压缩文件</span><br></pre></td></tr></table></figure>

<h4 id="5、系统服务管理"><a href="#5、系统服务管理" class="headerlink" title="5、系统服务管理"></a>5、系统服务管理</h4><p>拿达梦服务做演示</p>
<ol>
<li>输出系统中各个服务的状态</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl list-units --type=service</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/phshi/phshi_picture/raw/master/img/systemctl_see_service.png" alt="输出各个服务状态"></p>
<ol start="2">
<li>查看服务运行状态</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status DmServiceDMSERVER.service</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/phshi/phshi_picture/raw/master/img/systemctl_status.png" alt="查看服务运行状态"></p>
<ol start="3">
<li>关闭服务</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop DmServiceDMSERVER.service</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>启动服务</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start DmServiceDMSERVER.service</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>重新启动服务（不管当前服务是启动还是关闭）</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart DmServiceDMSERVER.service</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>重新载入配置信息而不中断服务</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl reload DmServiceDMSERVER.service</span><br></pre></td></tr></table></figure>

<ol start="7">
<li>禁止服务开机自启动</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl disable DmServiceDMSERVER.service</span><br></pre></td></tr></table></figure>

<ol start="8">
<li>设置服务开机自启动</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable DmServiceDMSERVER.service</span><br></pre></td></tr></table></figure>

<h4 id="6、内存与磁盘相关命令"><a href="#6、内存与磁盘相关命令" class="headerlink" title="6、内存与磁盘相关命令"></a>6、内存与磁盘相关命令</h4><h5 id="6-1、free"><a href="#6-1、free" class="headerlink" title="6.1、free"></a>6.1、free</h5><p> <strong>free命令用以显示当前系统内存使用情况，其数据取自/proc/meminfo文件。</strong></p>
<ol>
<li>使用方式</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/meminfo</span><br><span class="line">free -m   #是快速查看上一个命令的方法</span><br><span class="line">free -h -s 3   #表示每隔三秒输出一次内存情况</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/phshi/phshi_picture/raw/master/img/free.png" alt="free命令"></p>
<p>参数：</p>
<ul>
<li> <code>-b, –bytes</code>， 以Byte为单位显示内存使用情况</li>
<li></li>
<li> <code>-k, –kilo</code>， 以KB为单位， 这也是默认值</li>
<li><code>-m, –mega</code>， 以MB为单位显示内容使用情况</li>
<li><code>-g, –giga</code>， 以GB为单位显示内存使用情况</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">free -h    # human    换为人类可以读懂的方式</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/phshi/phshi_picture/raw/master/img/free_h.png" alt="free命令"></p>
<ol start="2">
<li>内容解读</li>
</ol>
<ul>
<li><strong>第一列</strong><br> <code>Mem</code> 内存的使用信息<br> <code>Swap</code> 交换空间的使用信息</li>
<li><strong>第一行</strong><br> <code>total</code> 系统总的可用物理内存和交换空间大小。<br> <code>used</code> 已经被使用的物理内存和交换空间。<br> <code>free</code> 还有多少物理内存和交换空间可用使用，是真正尚未被使用的物理内存数量。<br> <code>shared</code> 被共享使用的物理内存大小<br> <code>buff/cache</code> 被 buffer（缓冲区） 和 cache（缓存） 使用的物理内存大小。<br> <code>available</code> 还可以被 *<strong>应用程序*</strong> 使用的物理内存大小</li>
</ul>
<p><code>free</code> 是真正尚未被使用的物理内存数量。<br><code>available</code> 是应用程序认为可用内存数量，<code>available = free + buffer + cache</code> (注：只是大概的计算方法)</p>
<p><strong>如何判断系统内存不足：</strong> 如果Swap used值大于0，代表服务器物理内存已经遇到内存瓶颈了，已开始使用虚拟内存了，要么优化代码，要么加内存</p>
<ul>
<li><strong>什么是交换空间？</strong></li>
</ul>
<p>​       swap space 是磁盘上的一块区域，当系统物理内存吃紧时，Linux 会将内存中不常访问的数据保存到 swap 上，这样系统就有更多的物理内存为各个进程服务，而当系统需要访问 swap 上存储的内容时，再将 swap 上的数据加载到内存中，这就是常说的换出和换入。交换空间可以在一定程度上缓解内存不足的情况，但是它需要读写磁盘数据，所以性能不是很高。</p>
<h5 id="6-2、ps"><a href="#6-2、ps" class="headerlink" title="6.2、ps"></a>6.2、ps</h5><ul>
<li>显示系统进程运行动态</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef</span><br></pre></td></tr></table></figure>

<ul>
<li>查看<code>java</code>进程的运行动态</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef|grep java</span><br></pre></td></tr></table></figure>
<ul>
<li>查看特定进程的数量</li>
</ul>
<p>如查看java进程的数量,<code>ps -ef | grep java| wc -l</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep java| wc -l</span><br></pre></td></tr></table></figure>

<ul>
<li>查看线程是否存在死锁</li>
</ul>
<p>查看线程是否存在死锁，<code>jstack -l pid</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# jstack -l 124146</span><br><span class="line">2020-05-02 10:13:38</span><br><span class="line">Full thread dump OpenJDK 64-Bit Server VM (25.252-b09 mixed mode):</span><br><span class="line"></span><br><span class="line">&quot;C1 CompilerThread1&quot; #6 daemon prio=9 os_prio=0 tid=0x00007f27f013c000 nid=0x1e4f9 waiting on condition [0x0000000000000000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">        - None</span><br><span class="line"></span><br><span class="line">&quot;C2 CompilerThread0&quot; #5 daemon prio=9 os_prio=0 tid=0x00007f27f012d000 nid=0x1e4f8 waiting on condition [0x0000000000000000]</span><br><span class="line">   java.lang.Thread.State: RUNNABLE</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">        - None</span><br><span class="line"></span><br><span class="line">&quot;main&quot; #1 prio=5 os_prio=0 tid=0x00007f27f004b800 nid=0x1e4f3 waiting on condition [0x00007f27f7274000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (sleeping)</span><br><span class="line">        at java.lang.Thread.sleep(Native Method)</span><br><span class="line">        at java.lang.Thread.sleep(Thread.java:340)</span><br><span class="line">        at java.util.concurrent.TimeUnit.sleep(TimeUnit.java:386)</span><br><span class="line">        at demo.MathGame.main(MathGame.java:17)</span><br><span class="line"></span><br><span class="line">   Locked ownable synchronizers:</span><br><span class="line">        - None</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<ul>
<li>查看某个进程的线程数</li>
</ul>
<p><code>ps -efL | grep [PID] | wc -l</code>，如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ps -efL | grep 124146 | wc -l</span><br><span class="line">12</span><br></pre></td></tr></table></figure>

<ul>
<li>查看具体有哪些线程用<code>ps -Lp [pid] cu</code>:</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ps -Lp 124146 cu</span><br><span class="line">USER        PID    LWP %CPU NLWP %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class="line">root     124146 124146  0.0   11  2.5 2489116 35724 pts/0   Sl+  09:13   0:00 java</span><br><span class="line">root     124146 124147  0.0   11  2.5 2489116 35724 pts/0   Sl+  09:13   0:01 java</span><br><span class="line">root     124146 124148  0.0   11  2.5 2489116 35724 pts/0   Sl+  09:13   0:00 VM Thread</span><br><span class="line">root     124146 124149  0.0   11  2.5 2489116 35724 pts/0   Sl+  09:13   0:00 Reference Handl</span><br><span class="line">root     124146 124150  0.0   11  2.5 2489116 35724 pts/0   Sl+  09:13   0:00 Finalizer</span><br><span class="line">root     124146 124151  0.0   11  2.5 2489116 35724 pts/0   Sl+  09:13   0:00 Signal Dispatch</span><br><span class="line">root     124146 124152  0.0   11  2.5 2489116 35724 pts/0   Sl+  09:13   0:00 C2 CompilerThre</span><br><span class="line">root     124146 124153  0.0   11  2.5 2489116 35724 pts/0   Sl+  09:13   0:00 C1 CompilerThre</span><br><span class="line">root     124146 124154  0.0   11  2.5 2489116 35724 pts/0   Sl+  09:13   0:00 Service Thread</span><br><span class="line">root     124146 124155  0.1   11  2.5 2489116 35724 pts/0   Sl+  09:13   0:05 VM Periodic Tas</span><br><span class="line">root     124146 125362  0.0   11  2.5 2489116 35724 pts/0   Sl+  10:13   0:00 Attach Listener</span><br></pre></td></tr></table></figure>

<ul>
<li>统计所有的log文件中，包含Error字符的行</li>
</ul>
<p><code>find / -type f -name &quot;*.log&quot; | xargs grep &quot;ERROR&quot;</code>，这个在排查问题过程中比较有用：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# find / -type f -name &quot;*.log&quot; | xargs grep &quot;ERROR&quot;</span><br><span class="line">/var/log/tuned/tuned.log:2020-03-13 18:05:59,145 ERROR    tuned.utils.commands: Writing to file &#x27;/sys/devices/system/cpu/cpu0/cpufreq/scaling_governor&#x27; error: &#x27;[Errno 19] No such device&#x27;</span><br><span class="line">/var/log/tuned/tuned.log:2020-03-13 18:05:59,145 ERROR    tuned.utils.commands: Writing to file &#x27;/sys/devices/system/cpu/cpu1/cpufreq/scaling_governor&#x27; error: &#x27;[Errno 19] No such device&#x27;</span><br><span class="line">/var/log/tuned/tuned.log:2020-04-28 14:55:34,857 ERROR    tuned.utils.commands: Writing to file &#x27;/sys/devices/system/cpu/cpu0/cpufreq/scaling_governor&#x27; error: &#x27;[Errno 19] No such device&#x27;</span><br><span class="line">/var/log/tuned/tuned.log:2020-04-28 14:55:34,859 ERROR    tuned.utils.commands: Writing to file &#x27;/sys/devices/system/cpu/cpu1/cpufreq/scaling_governor&#x27; error: &#x27;[Errno 19] No such device&#x27;</span><br><span class="line">/var/log/tuned/tuned.log:2020-04-28 15:23:19,037 ERROR    tuned.utils.commands: Writing to file &#x27;/sys/devices/system/cpu/cpu0/cpufreq/scaling_governor&#x27; error: &#x27;[Errno 19] No such device&#x27;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h5 id="6-3、top"><a href="#6-3、top" class="headerlink" title="6.3、top"></a>6.3、top</h5><p>查看即时活跃的进程，类似Windows的任务管理器。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">top</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/phshi/phshi_picture/raw/master/img/top.png" alt="top"></p>
<p>内容及参数说明：</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/phshi/phshi_picture/raw/master/img/top_info.png"></p>
<p>第一行：<code>22:07:24 up 110 days,  9:19,  1 user,  load average: 4.01, 4.07, 4.06</code> ：22:07:24 系统时间，up 110 days 运行时间，1 user 当前登录用户数，load average 负载均衡情况，分别表示1分钟，5分钟，15分钟负载情况。</p>
<p>第二行：<code>Tasks: 315 total,1 running, 313 sleeping, 0 stopped,1 zombie</code>：总进程数315，运行数1，休眠 313，停止0，僵尸进程0。</p>
<p>第三行：<code>%Cpu(s): 50.8 us, 0.5 sy, 0.0 ni, 48.6 id, 0.0 wa,0.0 hi,0.0 si,0.0 st</code>：用户空间CPU占比50.8%，内核空间CPU占比0.5%，改变过优先级的进程CPU占比0。0%，空闲CPU占比48.6%，IO等待占用CPU占比0.0%，硬中断占用CPU占比0。0%，软中断占用CPU占比0.0%,当前VM中的cpu 时钟被虚拟化偷走的比例0.0%。</p>
<p>第四和第五行表示内存和swap区域的使用情况。</p>
<p>第七行表示：</p>
<ul>
<li><code>PID</code>: 进程id</li>
<li><code>USER</code>:进程所有者</li>
<li><code>PR</code>:进程优先级</li>
<li><code>NI</code>:nice值。负值表示高优先级，正值表示低优先级</li>
<li><code>VIRT</code>:虚拟内存，进程使用的虚拟内存总量，单位kb。VIRT=SWAP+RES</li>
<li><code>RES</code>:常驻内存，进程使用的、未被换出的物理内存大小，单位kb。RES=CODE+DATA</li>
<li><code>SHR</code>:共享内存，共享内存大小，单位kb</li>
<li><code>S</code>:进程状态。D=不可中断的睡眠状态 R=运行 S=睡眠 T=跟踪/停止 Z=僵尸进程</li>
<li><code>%CPU</code>:上次更新到现在的CPU时间占用百分比</li>
<li><code>%MEM</code>:进程使用的物理内存百分比</li>
<li><code>TIME+</code>:进程使用的CPU时间总计，单位1/100秒</li>
<li><code>COMMAND</code>:进程名称（命令名/命令行）</li>
</ul>
<h5 id="6-4、uptime"><a href="#6-4、uptime" class="headerlink" title="6.4、uptime"></a>6.4、uptime</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uptime</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/phshi/phshi_picture/raw/master/img/uptime.png"></p>
<p>参数分别为：当前时间  系统运行天数   当前登录用户个数   系统负载（即任务队列的平均长度）：1mim   5mim  15mim到现在的平均值  </p>
<h5 id="6-5、df"><a href="#6-5、df" class="headerlink" title="6.5、df"></a>6.5、df</h5><p>查看磁盘空间占用情况</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df -hT</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/phshi/phshi_picture/raw/master/img/df.png"></p>
<h5 id="6-6、du"><a href="#6-6、du" class="headerlink" title="6.6、du"></a>6.6、du</h5><p><code>du -sh</code>命令是查看磁盘已使用空间的情况，这里的“已使用的磁盘空间”意思是指定的文件下的整个文件层次结构所使用的空间，在没给定参数的情况下，<code>du</code>报告当前目录所使用的磁盘空间。其实就是显示文件或目录所占用的磁盘空间的情况：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">du -sh</span><br></pre></td></tr></table></figure>

<ul>
<li><code>-h</code>：输出文件系统分区使用的情况，例如：10KB，10MB，10GB等。</li>
<li><code>-s</code>：显示文件或整个目录的大小，默认单位是KB。</li>
</ul>
<blockquote>
<p><strong>!!</strong> <code>du</code>的详细信息可以通过 <code>man du</code>查看。</p>
</blockquote>
<p>查看当前目录下的文件及文件夹所占大小</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">du -h --max-depth=1 ./*</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/phshi/phshi_picture/raw/master/img/du.png"></p>
<h5 id="6-7、vastat（重要）"><a href="#6-7、vastat（重要）" class="headerlink" title="6.7、vastat（重要）"></a>6.7、vastat（重要）</h5><p>虚拟内存统计，是Linux中监控内存的常用工具，可对操作系统的虚拟内存、进程、CPU等的整体情况进行监视，推荐使用。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vmstat</span><br><span class="line">vmstat 5 3   # 表示每隔5秒统计一次，一共统计三次。</span><br></pre></td></tr></table></figure>

<p><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/phshi/phshi_picture/raw/master/img/vmstat.png"></p>
<p> <strong>procs</strong></p>
<ul>
<li><code>r</code>：表示运行和等待CPU时间片的进程数（就是说多少个进程真的分配到CPU），这个值如果长期大于系统CPU个数，说明CPU不足，需要增加CPU。</li>
<li><code>b</code>：表示在等待资源的进程数，比如正在等待I/O或者内存交换等。</li>
</ul>
<p><strong>memory</strong></p>
<ul>
<li><code>swpd</code>：表示切换到内存交换区的内存大小，即虚拟内存已使用的大小（单位KB），如果大于0，表示你的机器物理内存不足了，如果不是程序内存泄露的原因，那么你该升级内存了或者把耗内存的任务迁移到其他机器。</li>
<li><code>free</code>：表示当前空闲的物理内存。</li>
<li><code>buff</code>：表示缓冲大小，一般对块设备的读写才需要缓冲</li>
<li> <code>Cache</code>：表示缓存大小，一般作为文件系统进行缓冲，频繁访问的文件都会被缓存，如果cache值非常大说明缓存文件比较多，如果此时io中的bi比较小，说明文件系统效率比较好。</li>
</ul>
<p><strong>swap</strong></p>
<ul>
<li><code>si</code>：表示数据由磁盘读入内存；通俗的讲就是每秒从磁盘读入虚拟内存的大小，如果这个值大于0，表示物理内存不够用或者内存泄露了，要查找耗内存进程解决掉。</li>
<li><code>so</code>：表示由内存写入磁盘，也就是由内存交换区进入内存的数据大小。</li>
</ul>
<blockquote>
<p><strong>!!</strong> 注意：一般情况下si、so的值都为0，如果si、so的值长期不为0，则说明系统内存不足，需要增加系统内存</p>
</blockquote>
<p><strong>io</strong></p>
<ul>
<li><code>bi</code>：表示由块设备读入数据的总量，即读磁盘，单位kb/s <code>bo</code>：表示写到块设备数据的总量，即写磁盘，单位kb/s</li>
</ul>
<blockquote>
<p><strong>!!</strong> 注意：如果bi+bo的值过大，且wa值较大，则表示系统磁盘IO瓶颈。</p>
</blockquote>
<p><strong>system</strong></p>
<ul>
<li><code>in</code>：表示某一时间间隔内观测到的每秒设备终端数。</li>
<li><code>cs</code>：表示每秒产生的上下文切换次数，这个值要越小越好，太大了，要考虑调低线程或者进程的数目。例如在apache和nginx这种web服务器中，我们一般做性能测试时会进行几千并发甚至几万并发的测试，选择web服务器的进程可以由进程或者线程的峰值一直下调，压测，直到cs到一个比较小的值，这个进程和线程数就是比较合适的值了。系统调用也是，每次调用系统函数，我们的代码就会进入内核空间，导致上下文切换，这个是很耗资源，也要尽量避免频繁调用系统函数。上下文切换次数过多表示你的CPU大部分浪费在上下文切换，导致CPU干正经事的时间少了，CPU没有充分利用，是不可取的。</li>
</ul>
<blockquote>
<p><strong>!!</strong> 注意：这两个值越大，则由内核消耗的CPU就越多。</p>
</blockquote>
<p><strong>CPU</strong></p>
<ul>
<li><code>us</code>：表示用户进程消耗的CPU时间百分比，us值越高，说明用户进程消耗CPU时间越多，如果长期大于50%，则需要考虑优化程序或者算法。</li>
<li><code>sy</code>：表示系统内核进程消耗的CPU时间百分比，一般来说us+sy应该小于80%，如果大于80%，说明可能存在CPU瓶颈。</li>
<li><code>id</code>：表示CPU处在空间状态的时间百分比。</li>
<li><code>wa</code>：表示IP等待所占用的CPU时间百分比，wa值越高，说明I/O等待越严重，根据经验wa的参考值为20%，如果超过20%，说明I/O等待严重，引起I/O等待的原因可能是磁盘大量随机读写造成的，也可能是磁盘或者监控器的贷款瓶颈（主要是块操作）造成的。</li>
</ul>
<h5 id="6-8、定位线上最耗CPU的线程"><a href="#6-8、定位线上最耗CPU的线程" class="headerlink" title="6.8、定位线上最耗CPU的线程"></a>6.8、定位线上最耗CPU的线程</h5><p><strong>准备工作</strong></p>
<p>启动一个程序。<code>arthas-demo</code>是一个简单的程序，每隔一秒生成一个随机数，再执行质因数分解，并打印出分解结果。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">curl -O https://alibaba.github.io/arthas/arthas-demo.jar</span><br><span class="line">java -jar arthas-demo.jar</span><br><span class="line">[root@localhost ~]# curl -O https://alibaba.github.io/arthas/arthas-demo.jar</span><br><span class="line"><span class="meta">  %</span><span class="bash"> Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span></span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  3743  100  3743    0     0   3022      0  0:00:01  0:00:01 --:--:--  3023</span><br><span class="line">[root@localhost ~]# java -jar arthas-demo.jar</span><br><span class="line">1813=7*7*37</span><br><span class="line">illegalArgumentCount:  1, number is: -180005, need &gt;= 2</span><br><span class="line">illegalArgumentCount:  2, number is: -111175, need &gt;= 2</span><br><span class="line">18505=5*3701</span><br><span class="line">166691=7*23813</span><br><span class="line">105787=11*59*163</span><br><span class="line">60148=2*2*11*1367</span><br><span class="line">196983=3*3*43*509</span><br><span class="line">illegalArgumentCount:  3, number is: -173479, need &gt;= 2</span><br><span class="line">illegalArgumentCount:  4, number is: -112840, need &gt;= 2</span><br><span class="line">39502=2*19751</span><br><span class="line">....</span><br></pre></td></tr></table></figure>

<p><strong>通过<code>top</code>命令找到最耗时的进程</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# top</span><br><span class="line">top - 11:11:05 up 20:02,  3 users,  load average: 0.09, 0.07, 0.05</span><br><span class="line">Tasks: 225 total,   1 running, 224 sleeping,   0 stopped,   0 zombie</span><br><span class="line"><span class="meta">%</span><span class="bash">Cpu(s):  0.0 us,  0.7 sy,  0.0 ni, 99.3 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</span></span><br><span class="line">KiB Mem :  1421760 total,   135868 free,   758508 used,   527384 buff/cache</span><br><span class="line">KiB Swap:  2097148 total,  2070640 free,    26508 used.   475852 avail Mem</span><br><span class="line">Change delay from 3.0 to</span><br><span class="line">   PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND</span><br><span class="line"> 98344 root      20   0 2422552  23508  12108 S   0.7  1.7   0:00.32 java</span><br><span class="line">     1 root      20   0  194100   6244   3184 S   0.0  0.4   0:20.41 systemd</span><br><span class="line">     2 root      20   0       0      0      0 S   0.0  0.0   0:00.12 kthreadd</span><br><span class="line">     4 root       0 -20       0      0      0 S   0.0  0.0   0:00.00 kworker/0:0H</span><br><span class="line">     6 root      20   0       0      0      0 S   0.0  0.0   0:20.25 ksoftirqd/0</span><br></pre></td></tr></table></figure>

<p>找到进程号是98344。</p>
<p><strong>找到进程中最耗CUP的线程</strong></p>
<p>使用<code>ps -Lp #pid cu</code>命令，查看某个进程中的线程CPU消耗排序：</p>
<figure class="highlight shell"><figcaption><span>l</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ps -Lp 98344 cu</span><br><span class="line">USER        PID    LWP %CPU NLWP %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class="line">root      98344  98344  0.0   10  4.1 2422552 59060 pts/0   Sl+  11:09   0:00 java</span><br><span class="line">root      98344  98345  0.0   10  4.1 2422552 59060 pts/0   Sl+  11:09   0:04 java</span><br><span class="line">root      98344  98346  0.0   10  4.1 2422552 59060 pts/0   Sl+  11:09   0:01 VM Thread</span><br><span class="line">root      98344  98347  0.0   10  4.1 2422552 59060 pts/0   Sl+  11:09   0:00 Reference Handl</span><br><span class="line">root      98344  98348  0.0   10  4.1 2422552 59060 pts/0   Sl+  11:09   0:00 Finalizer</span><br><span class="line">root      98344  98349  0.0   10  4.1 2422552 59060 pts/0   Sl+  11:09   0:00 Signal Dispatch</span><br><span class="line">root      98344  98350  0.0   10  4.1 2422552 59060 pts/0   Sl+  11:09   0:05 C2 CompilerThre</span><br><span class="line">root      98344  98351  0.0   10  4.1 2422552 59060 pts/0   Sl+  11:09   0:00 C1 CompilerThre</span><br><span class="line">root      98344  98352  0.0   10  4.1 2422552 59060 pts/0   Sl+  11:09   0:00 Service Thread</span><br><span class="line">root      98344  98353  0.1   10  4.1 2422552 59060 pts/0   Sl+  11:09   0:19 VM Periodic Tas</span><br></pre></td></tr></table></figure>

<p>看<code>TIME</code>列可以看出那个线程耗费CUP多，根据<code>LWP</code>列可以看到线程的ID号，但是需要转换成16进制才可以查询线程堆栈信息。</p>
<p><strong>获取线程id的十六进制码</strong></p>
<p>使用<code>printf &#39;%x\n&#39; 98345</code>命令做进制转换：</p>
<figure class="highlight shell"><figcaption><span>l</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# printf &#x27;%x\n&#x27; 98345</span><br><span class="line">18029</span><br></pre></td></tr></table></figure>

<p><strong>查看线程堆栈信息</strong></p>
<p>使用jstack获取堆栈信息<code>jstack 98344 | grep -A 10 18029</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# jstack 98344 | grep -A 10 18029</span><br><span class="line">&quot;main&quot; #1 prio=5 os_prio=0 tid=0x00007fb88404b800 nid=0x18029 waiting on condition [0x00007fb88caab000]</span><br><span class="line">   java.lang.Thread.State: TIMED_WAITING (sleeping)</span><br><span class="line">        at java.lang.Thread.sleep(Native Method)</span><br><span class="line">        at java.lang.Thread.sleep(Thread.java:340)</span><br><span class="line">        at java.util.concurrent.TimeUnit.sleep(TimeUnit.java:386)</span><br><span class="line">        at demo.MathGame.main(MathGame.java:17)</span><br><span class="line"></span><br><span class="line">&quot;VM Thread&quot; os_prio=0 tid=0x00007fb8840f2800 nid=0x1802a runnable</span><br><span class="line"></span><br><span class="line">&quot;VM Periodic Task Thread&quot; os_prio=0 tid=0x00007fb884154000 nid=0x18031 waiting on condition</span><br></pre></td></tr></table></figure>

<p>通过命令我们可以看到这个线程的对应的耗时代码是在<code>demo.MathGame.main(MathGame.java:17)</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">grep -C 5 foo file 显示file文件里匹配foo字串那行以及上下5行</span><br><span class="line">grep -B 5 foo file 显示foo及前5行</span><br><span class="line">grep -A 5 foo file 显示foo及后5行</span><br></pre></td></tr></table></figure>

<h4 id="7、查看磁盘读写情况"><a href="#7、查看磁盘读写情况" class="headerlink" title="7、查看磁盘读写情况"></a>7、查看磁盘读写情况</h4><h5 id="7-1、查看磁盘总体读写情况"><a href="#7-1、查看磁盘总体读写情况" class="headerlink" title="7.1、查看磁盘总体读写情况"></a>7.1、查看磁盘总体读写情况</h5><p>通<code>iostat</code>查看磁盘总体的读写情况：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# iostat</span><br><span class="line">Linux 3.10.0-1062.el7.x86_64 (localhost.localdomain)    2020年05月02日  _x86_64_        (2 CPU)</span><br><span class="line"></span><br><span class="line">avg-cpu:  %user   %nice %system %iowait  %steal   %idle</span><br><span class="line">           0.17    0.00    0.20    0.46    0.00   99.17</span><br><span class="line"></span><br><span class="line">Device:            tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn</span><br><span class="line">sda               1.56        30.45        39.61    4659620    6060644</span><br><span class="line">scd0              0.00         0.02         0.00       3102          0</span><br><span class="line">dm-0              1.96        30.01        38.42    4591998    5878155</span><br><span class="line">dm-1              0.09         0.09         0.30      13840      45328</span><br></pre></td></tr></table></figure>

<ul>
<li><code>tps</code>：该设备每秒的传输次数。</li>
<li><code>kB_read/s</code>：每秒从设备（drive expressed）读取的数据量；</li>
<li><code>kB_wrtn/s</code>：每秒向设备（drive expressed）写入的数据量；</li>
<li><code>kB_read</code>：读取的总数据量；</li>
<li><code>kB_wrtn</code>：写入的总数量数据量；</li>
</ul>
<h5 id="7-2、查看磁盘详细读写情况"><a href="#7-2、查看磁盘详细读写情况" class="headerlink" title="7.2、查看磁盘详细读写情况"></a>7.2、查看磁盘详细读写情况</h5><p>通过<code>iostat -x 1 3</code>可以看到磁盘详细读写情况，没隔一秒输出一次一共输出3次，当看到I/O等待时间所占CPU时间的比重很高的时候，首先要检查的就是机器是否正在大量使用交换空间，同时关注<code>iowait</code>占比cpu的消耗是否很大，如果大说明磁盘存在大的瓶颈，同时关注<code>await</code>，表示磁盘的响应时间以便小于5ms：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# iostat -x 1 3</span><br><span class="line">Linux 3.10.0-1062.el7.x86_64 (localhost.localdomain)    2020年05月02日  _x86_64_        (2 CPU)</span><br><span class="line"></span><br><span class="line">avg-cpu:  %user   %nice %system %iowait  %steal   %idle</span><br><span class="line">           0.17    0.00    0.20    0.46    0.00   99.16</span><br><span class="line"></span><br><span class="line">Device:         rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util</span><br><span class="line">sda               0.01     0.49    0.63    0.95    30.59    39.78    89.58     0.34  214.23   49.16  323.48   8.55   1.34</span><br><span class="line">scd0              0.00     0.00    0.00    0.00     0.02     0.00    98.48     0.00    1.21    1.21    0.00   0.95   0.00</span><br><span class="line">dm-0              0.00     0.00    0.62    1.35    30.15    38.59    69.70     0.91  460.67   49.12  648.54   6.66   1.31</span><br><span class="line">dm-1              0.00     0.00    0.02    0.07     0.09     0.30     8.52     0.04  442.74   95.43  521.17   6.91   0.06</span><br></pre></td></tr></table></figure>

<p><code>avg-cpu</code>表示总体cpu使用情况统计信息，对于多核cpu，这里为所有cpu的平均值：</p>
<ul>
<li><code>%user</code>：CPU处在用户模式下的时间百分比。</li>
<li><code>%nice</code>：CPU处在带NICE值的用户模式下的时间百分比。</li>
<li><code>%system</code>：CPU处在系统模式下的时间百分比。</li>
<li><code>%iowait</code>：CPU等待输入输出完成时间的百分比，如果%iowait的值过高，表示硬盘存在I/O瓶颈。</li>
<li><code>%steal</code>：管理程序维护另一个虚拟处理器时，虚拟CPU的无意识等待时间百分比。</li>
<li><code>%idle</code>：CPU空闲时间百分比，如果%idle值高，表示CPU较空闲；如果%idle值高但系统响应慢时，可能是CPU等待分配内存，应加大内存容量；如果%idle值持续低于10，表明CPU处理能力相对较低，系统中最需要解决的资源是CPU。。</li>
</ul>
<p><code>Device</code>表示设备信息：</p>
<ul>
<li><code>rrqm/s</code>：每秒对该设备的读请求被合并次数，文件系统会对读取同块(block)的请求进行合并</li>
<li><code>wrqm/s</code>：每秒对该设备的写请求被合并次数</li>
<li><code>r/s</code>：每秒完成的读次数</li>
<li><code>w/s</code>：每秒完成的写次数</li>
<li><code>rkB/s</code>：每秒读数据量(kB为单位)</li>
<li><code>wkB/s</code>：每秒写数据量(kB为单位)</li>
<li><code>avgrq-sz</code>：平均每次IO操作的数据量(扇区数为单位)</li>
<li><code>avgqu-sz</code>：平均等待处理的IO请求队列长度</li>
<li><code>await</code>：平均每次IO请求等待时间(包括等待时间和处理时间，毫秒为单位)</li>
<li><code>svctm</code>：平均每次IO请求的处理时间(毫秒为单位)</li>
<li><code>%util</code>：一秒中有百分之多少的时间用于 I/O如果%util接近100%，说明产生的I/O请求太多，I/O系统已经满负荷。<code>idle</code>小于70% IO压力就较大了，一般读取速度有较多的wait。</li>
</ul>
<blockquote>
<p><strong>!!</strong> <code>iostat -xmd 1 3</code>：新增<code>m</code>选项可以在输出是使用<code>M</code>为单位。</p>
</blockquote>
<h4 id="8、查看最耗IO的进程"><a href="#8、查看最耗IO的进程" class="headerlink" title="8、查看最耗IO的进程"></a>8、查看最耗IO的进程</h4><p>一般先通过<code>iostat</code>查看是否存在io瓶颈，再使用<code>iotop</code>命令来定位那个进程最耗费IO：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# iotop</span><br><span class="line">Total DISK READ :       0.00 B/s | Total DISK WRITE :       0.00 B/s</span><br><span class="line">Actual DISK READ:       0.00 B/s | Actual DISK WRITE:       0.00 B/s</span><br><span class="line">   TID  PRIO  USER     DISK READ  DISK WRITE  SWAPIN     IO&gt;    COMMAND</span><br><span class="line">123931 be/4 root        0.00 B/s    0.00 B/s  0.00 %  0.02 % [kworker/1:30]</span><br><span class="line"> 94208 be/4 xiaolyuh    0.00 B/s    0.00 B/s  0.00 %  0.00 % nautilus-desktop --force [gmain]</span><br><span class="line">     1 be/4 root        0.00 B/s    0.00 B/s  0.00 %  0.00 % systemd --system --deserialize 62</span><br><span class="line">     2 be/4 root        0.00 B/s    0.00 B/s  0.00 %  0.00 % [kthreadd]</span><br><span class="line"> 94211 be/4 xiaolyuh    0.00 B/s    0.00 B/s  0.00 %  0.00 % gvfsd-trash --spawner :1.4 /org/gtk/gvfs/exec_spaw/0</span><br><span class="line">     4 be/0 root        0.00 B/s    0.00 B/s  0.00 %  0.00 % [kworker/0:0H]</span><br><span class="line">     6 be/4 root        0.00 B/s    0.00 B/s  0.00 %  0.00 % [ksoftirqd/0]</span><br><span class="line">     7 rt/4 root        0.00 B/s    0.00 B/s  0.00 %  0.00 % [migration/0]</span><br><span class="line">     8 be/4 root        0.00 B/s    0.00 B/s  0.00 %  0.00 % [rcu_bh]</span><br><span class="line">     9 be/4 root        0.00 B/s    0.00 B/s  0.00 %  0.00 % [rcu_sched]</span><br><span class="line">    10 be/0 root        0.00 B/s    0.00 B/s  0.00 %  0.00 % [lru-add-drain]</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>通过<code>iotop -p pid</code>可以查看单个进程的IO情况：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# iotop -p 124146</span><br><span class="line">Total DISK READ :       0.00 B/s | Total DISK WRITE :       0.00 B/s</span><br><span class="line">Actual DISK READ:       0.00 B/s | Actual DISK WRITE:       0.00 B/s</span><br><span class="line">   TID  PRIO  USER     DISK READ  DISK WRITE  SWAPIN     IO&gt;    COMMAND</span><br><span class="line">124146 be/4 root        0.00 B/s    0.00 B/s  0.00 %  0.00 % java -jar arthas-demo.jar</span><br></pre></td></tr></table></figure>

<h4 id="9、网络"><a href="#9、网络" class="headerlink" title="9、网络"></a>9、网络</h4><h5 id="9-1、netstat"><a href="#9-1、netstat" class="headerlink" title="9.1、netstat"></a>9.1、<code>netstat</code></h5><ul>
<li>查看当前路由信息：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -rn</span><br></pre></td></tr></table></figure>

<ul>
<li>查看所有有效TCP连接：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -an</span><br></pre></td></tr></table></figure>

<ul>
<li>查看系统中启动的监听服务：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -tulnp</span><br></pre></td></tr></table></figure>

<ul>
<li>查看处于连接状态的系统资源信息：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -atunp</span><br></pre></td></tr></table></figure>

<h5 id="9-2、定位丢包，错包情况"><a href="#9-2、定位丢包，错包情况" class="headerlink" title="9.2、定位丢包，错包情况"></a>9.2、定位丢包，错包情况</h5><p><code>watch more /proc/net/dev</code>用于定位丢包，错包情况，以便看网络瓶颈，重点关注drop(包被丢弃)和网络包传送的总量，不要超过网络上限：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# watch -n 2 more /proc/net/dev</span><br><span class="line">Every 2.0s: more /proc/net/dev                                                                                                                                                   Fri May  1 17:16:55 2020</span><br><span class="line"></span><br><span class="line">Inter-|   Receive                                                |  Transmit</span><br><span class="line"> face |bytes    packets errs drop fifo frame compressed multicast|bytes    packets errs drop fifo colls carrier compressed</span><br><span class="line">    lo:   10025     130    0    0    0     0          0         0    10025     130    0    0    0     0       0          0</span><br><span class="line"> ens33: 759098071  569661    0    0    0     0          0         0 19335572  225551    0    0    0     0       0          0</span><br></pre></td></tr></table></figure>

<ul>
<li>最左边的表示接口的名字，Receive表示收包，Transmit表示发送包；</li>
<li><code>bytes</code>：表示收发的字节数；</li>
<li><code>packets</code>：表示收发正确的包量；</li>
<li><code>errs</code>：表示收发错误的包量；</li>
<li><code>drop</code>：表示收发丢弃的包量；</li>
</ul>
<h5 id="9-3、查看网络错误"><a href="#9-3、查看网络错误" class="headerlink" title="9.3、查看网络错误"></a>9.3、查看网络错误</h5><p><code>netstat -i</code>可以查看网络错误：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# netstat -i</span><br><span class="line">Kernel Interface table</span><br><span class="line">Iface             MTU    RX-OK RX-ERR RX-DRP RX-OVR    TX-OK TX-ERR TX-DRP TX-OVR Flg</span><br><span class="line">ens33            1500   570291      0      0 0        225897      0      0      0 BMRU</span><br><span class="line">lo              65536      130      0      0 0           130      0      0      0 LRU</span><br></pre></td></tr></table></figure>

<ul>
<li><code>Iface</code>: 网络接口名称;</li>
<li><code>MTU</code>: 最大传输单元，它限制了数据帧的最大长度，不同的网络类型都有一个上限值，如：以太网的MTU是1500；</li>
<li><code>RX-OK</code>：接收时，正确的数据包数。</li>
<li><code>RX-ERR</code>：接收时，产生错误的数据包数。</li>
<li><code>RX-DRP</code>：接收时，丢弃的数据包数。</li>
<li><code>RX-OVR</code>：接收时，由于过速（在数据传输中，由于接收设备不能接收按照发送速率传送来的数据而使数据丢失）而丢失的数据包数。</li>
<li><code>TX-OK</code>：发送时，正确的数据包数。</li>
<li><code>TX-ERR</code>：发送时，产生错误的数据包数。</li>
<li><code>TX-DRP</code>：发送时，丢弃的数据包数。</li>
<li><code>TX-OVR</code>：发送时，由于过速而丢失的数据包数。</li>
<li><code>Flg</code>：标志，B 已经设置了一个广播地址。L 该接口是一个回送设备。M 接收所有数据包（混乱模式）。N 避免跟踪。O 在该接口上，禁用ARP。P 这是一个点到点链接。R 接口正在运行。U 接口处于“活动”状态。</li>
</ul>
<h5 id="9-4、包的重传率"><a href="#9-4、包的重传率" class="headerlink" title="9.4、包的重传率"></a>9.4、包的重传率</h5><p><code>cat /proc/net/snmp</code>用来查看和分析240秒内网络包量，流量，错包，丢包。通过<code>RetransSegs</code>和<code>OutSegs</code>来计算重传率<code>tcpetr=RetransSegs/OutSegs</code>。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cat /proc/net/snmp</span><br><span class="line">Ip: Forwarding DefaultTTL InReceives InHdrErrors InAddrErrors ForwDatagrams InUnknownProtos InDiscards InDelivers OutRequests OutDiscards OutNoRoutes ReasmTimeout ReasmReqds ReasmOKs ReasmFails FragOKs FragFails FragCreates</span><br><span class="line">Ip: 1 64 241708 0 0 0 0 0 238724 225517 15 0 0 0 0 0 0 0 0</span><br><span class="line">Icmp: InMsgs InErrors InCsumErrors InDestUnreachs InTimeExcds InParmProbs InSrcQuenchs InRedirects InEchos InEchoReps InTimestamps InTimestampReps InAddrMasks InAddrMaskReps OutMsgs OutErrors OutDestUnreachs OutTimeExcds OutParmProbs OutSrcQuenchs OutRedirects OutEchos OutEchoReps OutTimestamps OutTimestampReps OutAddrMasks OutAddrMaskReps</span><br><span class="line">Icmp: 149 0 0 50 99 0 0 0 0 0 0 0 0 0 147 0 147 0 0 0 0 0 0 0 0 0 0</span><br><span class="line">IcmpMsg: InType3 InType11 OutType3</span><br><span class="line">IcmpMsg: 50 99 147</span><br><span class="line">Tcp: RtoAlgorithm RtoMin RtoMax MaxConn ActiveOpens PassiveOpens AttemptFails EstabResets CurrEstab InSegs OutSegs RetransSegs InErrs OutRsts InCsumErrors</span><br><span class="line">Tcp: 1 200 120000 -1 376 6 0 0 4 236711 223186 292 0 4 0</span><br><span class="line">Udp: InDatagrams NoPorts InErrors OutDatagrams RcvbufErrors SndbufErrors InCsumErrors</span><br><span class="line">Udp: 1405 438 0 1896 0 0 0</span><br><span class="line">UdpLite: InDatagrams NoPorts InErrors OutDatagrams RcvbufErrors SndbufErrors InCsumErrors</span><br><span class="line">UdpLite: 0 0 0 0 0 0 0</span><br></pre></td></tr></table></figure>

<p>重传率=292/223186≈0.13%</p>
<ul>
<li>平均每秒新增TCP连接数：通过/proc/net/snmp文件得到最近240秒内PassiveOpens的增量，除以240得到每秒的平均增量；</li>
<li>机器的TCP连接数 ：通过/proc/net/snmp文件的CurrEstab得到TCP连接数；</li>
<li>平均每秒的UDP接收数据报：通过/proc/net/snmp文件得到最近240秒内InDatagrams的增量，除以240得到平均每秒的UDP接收数据报；</li>
<li>平均每秒的UDP发送数据报：通过/proc/net/snmp文件得到最近240秒内OutDatagrams的增量，除以240得到平均每秒的UDP发送数据报；</li>
</ul>
<h4 id="10、文件上传下载"><a href="#10、文件上传下载" class="headerlink" title="10、文件上传下载"></a>10、文件上传下载</h4><ul>
<li>安装上传下载工具<code>lrzsz</code>；</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y lrzsz</span><br></pre></td></tr></table></figure>

<ul>
<li>上传文件，输入以下命令<code>XShell</code>会弹出文件上传框；</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rz</span><br></pre></td></tr></table></figure>

<ul>
<li>下载文件，输入以下命令<code>XShell</code>会弹出文件保存框；</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sz fileName</span><br></pre></td></tr></table></figure>

<h4 id="11、rpm"><a href="#11、rpm" class="headerlink" title="11、rpm"></a>11、rpm</h4><blockquote>
<p>RPM是<code>Red-Hat Package Manager</code>的缩写，一种Linux下通用的软件包管理方式，可用于安装和管理<code>.rpm</code>结尾的软件包。</p>
</blockquote>
<ul>
<li>安装软件包：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -ivh nginx-1.12.2-2.el7.x86_64.rpm</span><br></pre></td></tr></table></figure>

<ul>
<li>模糊搜索软件包：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep nginx</span><br></pre></td></tr></table></figure>

<ul>
<li>精确查找软件包：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa nginx</span><br></pre></td></tr></table></figure>

<ul>
<li>查询软件包的安装路径：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -ql nginx-1.12.2-2.el7.x86_64</span><br></pre></td></tr></table></figure>

<ul>
<li>查看软件包的概要信息：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qi nginx-1.12.2-2.el7.x86_64</span><br></pre></td></tr></table></figure>

<ul>
<li>验证软件包内容和安装文件是否一致：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -V nginx-1.12.2-2.el7.x86_64</span><br></pre></td></tr></table></figure>

<ul>
<li>更新软件包：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -Uvh nginx-1.12.2-2.el7.x86_64</span><br></pre></td></tr></table></figure>

<ul>
<li>删除软件包：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -e nginx-1.12.2-2.el7.x86_64</span><br></pre></td></tr></table></figure>

<h4 id="12、yum"><a href="#12、yum" class="headerlink" title="12、yum"></a>12、yum</h4><blockquote>
<p>Yum是<code>Yellow dog Updater, Modified</code>的缩写，能够在线自动下载RPM包并安装，可以自动处理依赖性关系，并且一次安装所有依赖的软件包，非常方便！</p>
</blockquote>
<ul>
<li>安装软件包：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install nginx</span><br></pre></td></tr></table></figure>

<ul>
<li>检查可以更新的软件包：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum check-update</span><br></pre></td></tr></table></figure>

<ul>
<li>更新指定的软件包：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum update nginx</span><br></pre></td></tr></table></figure>

<ul>
<li>在资源库中查找软件包信息：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum info nginx*</span><br></pre></td></tr></table></figure>

<ul>
<li>列出已经安装的所有软件包：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum info installed</span><br></pre></td></tr></table></figure>

<ul>
<li>列出软件包名称：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum list nginx*</span><br></pre></td></tr></table></figure>

<ul>
<li>模糊搜索软件包：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum search nginx</span><br></pre></td></tr></table></figure>

<h4 id="13、其他命令"><a href="#13、其他命令" class="headerlink" title="13、其他命令"></a>13、其他命令</h4><ul>
<li>杀死进程</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill -9 pid     #pid是进程的id</span><br></pre></td></tr></table></figure>

<ul>
<li>关机开机</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">reboot     #重启命令</span><br><span class="line">halt       #立即关机</span><br></pre></td></tr></table></figure>

<ul>
<li>修改某一个文件的权限</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod u=rwx,g=rw,o=r aaa.txt   #修改下的aaa.txt的权限为属主有全部权限，属主所在的组有读写权限，其他用户只有读的权限</span><br><span class="line">chmod 764 aaa.txt     #也可以表示为</span><br></pre></td></tr></table></figure>

<ul>
<li>用户相关</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">useradd test               #添加test用户</span><br><span class="line">useradd test -d /home/t1   #指定用户home目录</span><br><span class="line">passwd                     #设置、修改密码</span><br><span class="line">passwd  test               #为test用户设置密码</span><br><span class="line">su – 用户名                 #切换登录</span><br><span class="line">userdel test               #删除test用户(不会删除home目录)</span><br><span class="line">userdel –r test            #删除用户以及home目录</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://mp.weixin.qq.com/s/48Z_niFVb2AVk2zDWkK-WA">部分参考</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined" rel="external nofollow noreferrer">Phshi</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://github.com/phshis/phshi.github.io.git/2021/03/27/Linux/%E5%B8%B8%E7%94%A8Linux%E5%91%BD%E4%BB%A4/">https://github.com/phshis/phshi.github.io.git/2021/03/27/Linux/%E5%B8%B8%E7%94%A8Linux%E5%91%BD%E4%BB%A4/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://github.com/phshis/phshi.github.io.git" target="_blank">Phshi's blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a></div><div class="post_share"></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/pay/wechat.png" target="_blank"><img class="post-qr-code-img" data-lazy-src="/img/pay/wechat.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/pay/alipay.png" target="_blank"><img class="post-qr-code-img" data-lazy-src="/img/pay/alipay.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/03/27/LeetCode/easy/%E7%BD%97%E9%A9%AC%E6%95%B0%E5%AD%97%E8%BD%AC%E5%8C%96%E4%B8%BA%E6%95%B4%E6%95%B0/"><img class="prev-cover" data-lazy-src="https://gitee.com/phshi/phshi_picture/raw/master/img/roman-to-integer-canva.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">罗马数字转化为数字</div></div></a></div><div class="next-post pull-right"><a href="/2021/03/27/LeetCode/difficulty/%E5%AF%BB%E6%89%BE%E4%B8%A4%E4%B8%AA%E6%AD%A3%E5%BA%8F%E6%95%B0%E7%BB%84%E7%9A%84%E4%B8%AD%E4%BD%8D%E6%95%B0/"><img class="next-cover" data-lazy-src="https://gitee.com/phshi/phshi_picture/raw/master/img/median-of-two-sorted-arrays-canva.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">寻找两个正序数组的中位数</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Phshi</div><div class="author-info__description">stay hungry,stay foolish!</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">51</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">16</div></a></div></div><a class="button--animated" id="card-info-btn" href="https://github.com/XiaoXiao-S"><i class="fab fa-github"></i><span>GitHub</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:phshi.0603@foxmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">小小程序员一枚，欢迎大家进入我的blog，我也一直在学习，如果bolg中有什么错误，欢迎大家在<a href="/blog/messageboard/" style="color:#49b1f5">留言板</a>或者在邮件<span style="color:#49b1f5">phshi.0602@foxmail.com</span>进行反馈</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%E3%80%81%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86"><span class="toc-number">1.</span> <span class="toc-text">1、文件管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%E3%80%81%E7%B3%BB%E7%BB%9F"><span class="toc-number">2.</span> <span class="toc-text">2、系统</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3%E3%80%81%E6%96%87%E4%BB%B6%E6%9F%A5%E7%9C%8B"><span class="toc-number">3.</span> <span class="toc-text">3、文件查看</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4%E3%80%81%E8%A7%A3%E5%8E%8B%E4%B8%8E%E5%8E%8B%E7%BC%A9"><span class="toc-number">4.</span> <span class="toc-text">4、解压与压缩</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#4-1%E3%80%81tar%E7%B1%BB%E5%9E%8B"><span class="toc-number">4.1.</span> <span class="toc-text">4.1、tar类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-2%E3%80%81zip%E7%B1%BB%E5%9E%8B"><span class="toc-number">4.2.</span> <span class="toc-text">4.2、zip类型</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5%E3%80%81%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86"><span class="toc-number">5.</span> <span class="toc-text">5、系统服务管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6%E3%80%81%E5%86%85%E5%AD%98%E4%B8%8E%E7%A3%81%E7%9B%98%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4"><span class="toc-number">6.</span> <span class="toc-text">6、内存与磁盘相关命令</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#6-1%E3%80%81free"><span class="toc-number">6.1.</span> <span class="toc-text">6.1、free</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-2%E3%80%81ps"><span class="toc-number">6.2.</span> <span class="toc-text">6.2、ps</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-3%E3%80%81top"><span class="toc-number">6.3.</span> <span class="toc-text">6.3、top</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-4%E3%80%81uptime"><span class="toc-number">6.4.</span> <span class="toc-text">6.4、uptime</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-5%E3%80%81df"><span class="toc-number">6.5.</span> <span class="toc-text">6.5、df</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-6%E3%80%81du"><span class="toc-number">6.6.</span> <span class="toc-text">6.6、du</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-7%E3%80%81vastat%EF%BC%88%E9%87%8D%E8%A6%81%EF%BC%89"><span class="toc-number">6.7.</span> <span class="toc-text">6.7、vastat（重要）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-8%E3%80%81%E5%AE%9A%E4%BD%8D%E7%BA%BF%E4%B8%8A%E6%9C%80%E8%80%97CPU%E7%9A%84%E7%BA%BF%E7%A8%8B"><span class="toc-number">6.8.</span> <span class="toc-text">6.8、定位线上最耗CPU的线程</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7%E3%80%81%E6%9F%A5%E7%9C%8B%E7%A3%81%E7%9B%98%E8%AF%BB%E5%86%99%E6%83%85%E5%86%B5"><span class="toc-number">7.</span> <span class="toc-text">7、查看磁盘读写情况</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#7-1%E3%80%81%E6%9F%A5%E7%9C%8B%E7%A3%81%E7%9B%98%E6%80%BB%E4%BD%93%E8%AF%BB%E5%86%99%E6%83%85%E5%86%B5"><span class="toc-number">7.1.</span> <span class="toc-text">7.1、查看磁盘总体读写情况</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#7-2%E3%80%81%E6%9F%A5%E7%9C%8B%E7%A3%81%E7%9B%98%E8%AF%A6%E7%BB%86%E8%AF%BB%E5%86%99%E6%83%85%E5%86%B5"><span class="toc-number">7.2.</span> <span class="toc-text">7.2、查看磁盘详细读写情况</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8%E3%80%81%E6%9F%A5%E7%9C%8B%E6%9C%80%E8%80%97IO%E7%9A%84%E8%BF%9B%E7%A8%8B"><span class="toc-number">8.</span> <span class="toc-text">8、查看最耗IO的进程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9%E3%80%81%E7%BD%91%E7%BB%9C"><span class="toc-number">9.</span> <span class="toc-text">9、网络</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#9-1%E3%80%81netstat"><span class="toc-number">9.1.</span> <span class="toc-text">9.1、netstat</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-2%E3%80%81%E5%AE%9A%E4%BD%8D%E4%B8%A2%E5%8C%85%EF%BC%8C%E9%94%99%E5%8C%85%E6%83%85%E5%86%B5"><span class="toc-number">9.2.</span> <span class="toc-text">9.2、定位丢包，错包情况</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-3%E3%80%81%E6%9F%A5%E7%9C%8B%E7%BD%91%E7%BB%9C%E9%94%99%E8%AF%AF"><span class="toc-number">9.3.</span> <span class="toc-text">9.3、查看网络错误</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#9-4%E3%80%81%E5%8C%85%E7%9A%84%E9%87%8D%E4%BC%A0%E7%8E%87"><span class="toc-number">9.4.</span> <span class="toc-text">9.4、包的重传率</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10%E3%80%81%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%8B%E8%BD%BD"><span class="toc-number">10.</span> <span class="toc-text">10、文件上传下载</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#11%E3%80%81rpm"><span class="toc-number">11.</span> <span class="toc-text">11、rpm</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#12%E3%80%81yum"><span class="toc-number">12.</span> <span class="toc-text">12、yum</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13%E3%80%81%E5%85%B6%E4%BB%96%E5%91%BD%E4%BB%A4"><span class="toc-number">13.</span> <span class="toc-text">13、其他命令</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/08/08/Java/GC/JVM%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8(%E5%9B%9B)%20------%20%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8%EF%BC%88%E4%BA%8C%EF%BC%89/" title="JVM垃圾收集器(三) ------ 垃圾回收器(二)"><img data-lazy-src="https://gitee.com/phshi/phshi_picture/raw/master/img/GC4-canva.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JVM垃圾收集器(三) ------ 垃圾回收器(二)"/></a><div class="content"><a class="title" href="/2021/08/08/Java/GC/JVM%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8(%E5%9B%9B)%20------%20%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8%EF%BC%88%E4%BA%8C%EF%BC%89/" title="JVM垃圾收集器(三) ------ 垃圾回收器(二)">JVM垃圾收集器(三) ------ 垃圾回收器(二)</a><time datetime="2021-08-08T12:00:01.000Z" title="发表于 2021-08-08 20:00:01">2021-08-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/08/03/Java/GC/JVM%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8(%E4%B8%89)%20------%20%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8%EF%BC%88%E4%B8%80%EF%BC%89/" title="JVM垃圾收集器(三) ------ 垃圾回收器（一）"><img data-lazy-src="https://gitee.com/phshi/phshi_picture/raw/master/img/GC3-canva.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JVM垃圾收集器(三) ------ 垃圾回收器（一）"/></a><div class="content"><a class="title" href="/2021/08/03/Java/GC/JVM%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8(%E4%B8%89)%20------%20%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8%EF%BC%88%E4%B8%80%EF%BC%89/" title="JVM垃圾收集器(三) ------ 垃圾回收器（一）">JVM垃圾收集器(三) ------ 垃圾回收器（一）</a><time datetime="2021-08-03T15:22:56.000Z" title="发表于 2021-08-03 23:22:56">2021-08-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/07/25/Java/GC/JVM%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8(%E4%BA%8C)%20------%20%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E7%9B%B8%E5%85%B3%E7%AE%97%E6%B3%95/" title="JVM垃圾收集器(二) ------ 垃圾收集相关算法"><img data-lazy-src="https://gitee.com/phshi/phshi_picture/raw/master/img/GC1-canva.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JVM垃圾收集器(二) ------ 垃圾收集相关算法"/></a><div class="content"><a class="title" href="/2021/07/25/Java/GC/JVM%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8(%E4%BA%8C)%20------%20%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E7%9B%B8%E5%85%B3%E7%AE%97%E6%B3%95/" title="JVM垃圾收集器(二) ------ 垃圾收集相关算法">JVM垃圾收集器(二) ------ 垃圾收集相关算法</a><time datetime="2021-07-25T05:12:32.000Z" title="发表于 2021-07-25 13:12:32">2021-07-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/07/18/Java/GC/JVM%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8(%E4%B8%80)%20------%20%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E6%A6%82%E8%BF%B0/" title="JVM垃圾收集器(一) ------ 垃圾收集概述"><img data-lazy-src="https://gitee.com/phshi/phshi_picture/raw/master/img/GC0-canva.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JVM垃圾收集器(一) ------ 垃圾收集概述"/></a><div class="content"><a class="title" href="/2021/07/18/Java/GC/JVM%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E5%99%A8(%E4%B8%80)%20------%20%E5%9E%83%E5%9C%BE%E6%94%B6%E9%9B%86%E6%A6%82%E8%BF%B0/" title="JVM垃圾收集器(一) ------ 垃圾收集概述">JVM垃圾收集器(一) ------ 垃圾收集概述</a><time datetime="2021-07-18T11:25:49.000Z" title="发表于 2021-07-18 19:25:49">2021-07-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/07/10/Java/JVM/JVM%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E5%85%AD%EF%BC%89------%20%E5%AF%B9%E8%B1%A1%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84%E5%AD%98%E5%82%A8/" title="JVM内存模型（六）------ 对象在内存中的存储"><img data-lazy-src="https://gitee.com/phshi/phshi_picture/raw/master/img/runtime-data5-canva.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JVM内存模型（六）------ 对象在内存中的存储"/></a><div class="content"><a class="title" href="/2021/07/10/Java/JVM/JVM%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88%E5%85%AD%EF%BC%89------%20%E5%AF%B9%E8%B1%A1%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84%E5%AD%98%E5%82%A8/" title="JVM内存模型（六）------ 对象在内存中的存储">JVM内存模型（六）------ 对象在内存中的存储</a><time datetime="2021-07-10T02:15:49.000Z" title="发表于 2021-07-10 10:15:49">2021-07-10</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://gitee.com/phshi/phshi_picture/raw/master/img/linux.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2021 By Phshi</div><div class="footer_custom_text">Hi, welcome to my <a target="_blank" rel="noopener external nofollow noreferrer" href="http://baby_shi.gitee.io/blog/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly@3.7.0/source/js/utils.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly@3.7.0/source/js/main.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly@3.7.0/source/js/tw_cn.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly@3.7.0/source/js/search/local-search.min.js"></script><div class="js-pjax"><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(() => {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: 'default',
      })
      true && mermaid.init()
    })
  }
}</script><script>function loadWaline () {
  function initWaline () {
    const waline = new Waline(Object.assign({
      el: '#waline-wrap',
      serverURL: 'https://phshi-blog.vercel.app',
      avatar: 'monsterid',
      path: location.pathname,
      emojiCDN: '',
      emojiMaps: "",
      visitor: false
    }, {"placeholder":"如果有什么疑问或者问题，请在此处留言","pageSize":8,"lang":"zh-CN","requiredFields":["nick"]}))
  }

  if (typeof Waline === 'function') initWaline() 
  else getScript('https://cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js').then(initWaline)
}

if ('Waline' === 'Waline' || !true) {
  if (true) btf.loadComment(document.getElementById('waline-wrap'),loadWaline)
  else setTimeout(loadWaline, 0)
} else {
  function loadOtherComment () {
    loadWaline()
  }
}</script></div><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/talking/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})


document.addEventListener('pjax:send', function () {
  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>